<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>monsteRbashSeq - Bioinformatics, workshops</title><link href="https://ljcohen.github.io/blog/" rel="alternate"></link><link href="https://ljcohen.github.io/blog/feeds/bioinformatics-workshops.atom.xml" rel="self"></link><id>https://ljcohen.github.io/blog/</id><updated>2015-11-09T14:47:00-08:00</updated><entry><title>Bioboxes Demo at UC Davis</title><link href="https://ljcohen.github.io/blog/bioboxes-demo-at-uc-davis.html" rel="alternate"></link><published>2015-11-09T14:47:00-08:00</published><updated>2015-11-09T14:47:00-08:00</updated><author><name>monsterbashseq</name></author><id>tag:ljcohen.github.io,2015-11-09:/blog/bioboxes-demo-at-uc-davis.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.bioinformaticszen.com/"&gt;Michael Barton&lt;/a&gt;,
&lt;a href="http://jgi.doe.gov/"&gt;JGI&lt;/a&gt; sequencing QA/QC group&lt;/p&gt;
&lt;p&gt;https://www.flickr.com/photos/lpcohen/22487127088/&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNA sequencing&lt;/li&gt;
&lt;li&gt;Evaluating scientific software&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bioboxes.org/"&gt;Bioboxes&lt;/a&gt;,
    &lt;a href="http://nucleotid.es/"&gt;nucleotid.es&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;https://www.flickr.com/photos/lpcohen/22284282293/&lt;/p&gt;
&lt;p&gt;Suggests reading &lt;a href="https://en.wikipedia.org/wiki/Malcom_McLean"&gt;Malcom
McLean&lt;/a&gt; ([&lt;a href="http://press.princeton.edu/titles/9383.html"&gt;The
Box&lt;/a&gt;]{style="text-decoration:underline;"}),
who implemented idea for standardized cargo containers. All you have to
do …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.bioinformaticszen.com/"&gt;Michael Barton&lt;/a&gt;,
&lt;a href="http://jgi.doe.gov/"&gt;JGI&lt;/a&gt; sequencing QA/QC group&lt;/p&gt;
&lt;p&gt;https://www.flickr.com/photos/lpcohen/22487127088/&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNA sequencing&lt;/li&gt;
&lt;li&gt;Evaluating scientific software&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bioboxes.org/"&gt;Bioboxes&lt;/a&gt;,
    &lt;a href="http://nucleotid.es/"&gt;nucleotid.es&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;https://www.flickr.com/photos/lpcohen/22284282293/&lt;/p&gt;
&lt;p&gt;Suggests reading &lt;a href="https://en.wikipedia.org/wiki/Malcom_McLean"&gt;Malcom
McLean&lt;/a&gt; ([&lt;a href="http://press.princeton.edu/titles/9383.html"&gt;The
Box&lt;/a&gt;]{style="text-decoration:underline;"}),
who implemented idea for standardized cargo containers. All you have to
do is load standard container from factory, fit onto truck, cargo ships,
and trains. Then unload. Created containerized globalization. Similar
concept to standardized containers for software, biobox:&lt;/p&gt;
&lt;p&gt;Biobox f:fastq-&amp;gt; assembly&lt;/p&gt;
&lt;p&gt;Categorize Docker containers by their inputs and outputs, reads -&amp;gt;
assembler -&amp;gt; output assembly, pass data&lt;/p&gt;
&lt;p&gt;Problem is really social, need suggestions for improvements from
community. Most agree that standards benefit everyone involved. We're
members of the community. Example that we all have a collection of
adapters for peripheral hardware, e.g. display and printers, keyboards,
etc. At some point, it's good to have standard adapters, e.g. USB (not
going to mention Mac thunder port)&lt;/p&gt;
&lt;p&gt;Pass parameters to biobox, e.g. insert size&lt;/p&gt;
&lt;p&gt;Develop a machine to make machines (tools to make tools), simliar to
software tools - standardized way to develop&lt;/p&gt;
&lt;p&gt;Testing! Examples of tests to see whether they pass: Invalid format,
missing vresion numer, invalid version number, issing arguments, unknown
additional field, create contigs file, given valid input files, metadata
mounted&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pip install --user biobox_cli&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;biobox run&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;short_read_assembler \ bioboxes/velvet \ --input reads.fq.gz \ --output contigs.fa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Tutorial, run through neat examples:&lt;/p&gt;
&lt;p&gt;http://bioboxes.org/docs/how-to-install/&lt;/p&gt;
&lt;p&gt;http://bioboxes.org/docs/example-biobox-use/&lt;/p&gt;
&lt;p&gt;How to make a biobox? See workshop hackpad:&lt;/p&gt;
&lt;p&gt;https://hackpad.com/Notes-from-the-Docker-hands-on-Nov-9-10-2015-olJpjzy4jCj&lt;/p&gt;
&lt;p&gt;Demo repository:&lt;/p&gt;
&lt;p&gt;https://github.com/bioboxes/identity&lt;/p&gt;</content></entry><entry><title>Docker hands-on workshop at UC Davis</title><link href="https://ljcohen.github.io/blog/docker-hands-on-workshop-at-uc-davis.html" rel="alternate"></link><published>2015-11-09T11:29:00-08:00</published><updated>2015-11-09T11:29:00-08:00</updated><author><name>monsterbashseq</name></author><id>tag:ljcohen.github.io,2015-11-09:/blog/docker-hands-on-workshop-at-uc-davis.html</id><summary type="html">&lt;p&gt;&lt;a href="http://ivory.idyll.org/lab/"&gt;Dr. C. Titus Brown&lt;/a&gt;, &lt;a href="http://dib-training.readthedocs.org/en/pub/2015-11-09-docker.html"&gt;Docker hands-on
workshop at UC
Davis&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://dib-training.readthedocs.org/en/pub/"&gt;Lots of workshops available at
UCD&lt;/a&gt;, open to everyone and
free! (sign up, as max capacity is 40) Entry and intermediate levels
available. &lt;a href="http://datascience.ucdavis.edu/"&gt;Data Science Initiative&lt;/a&gt; is
a hub for data science on campus with space available for workshops in …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://ivory.idyll.org/lab/"&gt;Dr. C. Titus Brown&lt;/a&gt;, &lt;a href="http://dib-training.readthedocs.org/en/pub/2015-11-09-docker.html"&gt;Docker hands-on
workshop at UC
Davis&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://dib-training.readthedocs.org/en/pub/"&gt;Lots of workshops available at
UCD&lt;/a&gt;, open to everyone and
free! (sign up, as max capacity is 40) Entry and intermediate levels
available. &lt;a href="http://datascience.ucdavis.edu/"&gt;Data Science Initiative&lt;/a&gt; is
a hub for data science on campus with space available for workshops in
the library at UC Davis, which is where we are located today! All
materials are CC0, feel free to re-package and use for your own purposes
and workshops.&lt;/p&gt;
&lt;p&gt;Check out training organizations, &lt;a href="http://www.datacarpentry.org/"&gt;Data
Carpentry&lt;/a&gt; and &lt;a href="https://software-carpentry.org/"&gt;Software
Carpentry&lt;/a&gt; programming software
development and data science, short two-day local workshops available
internationally, beginner to intermediate skills.&lt;/p&gt;
&lt;p&gt;Also available: &lt;a href="http://www.bioinformaticszen.com/"&gt;Michael Barton&lt;/a&gt; from
&lt;a href="http://jgi.doe.gov/automating-selection-process-genome-assembler/"&gt;DOE-&lt;/a&gt;&lt;a href="http://jgi.doe.gov/automating-selection-process-genome-assembler/"&gt;JGI&lt;/a&gt;
lead on &lt;a href="http://bioboxes.org/"&gt;bioboxes&lt;/a&gt; and
&lt;a href="http://nucleotid.es/"&gt;nucleotid.es&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;=========&lt;/p&gt;
&lt;p&gt;Materials for today:&lt;/p&gt;
&lt;p&gt;https://github.com/ngs-docs/2015-nov-docker&lt;/p&gt;
&lt;p&gt;Intro:&lt;/p&gt;
&lt;p&gt;https://github.com/ngs-docs/2015-nov-docker/blob/master/docker-intro.rst&lt;/p&gt;
&lt;p&gt;Launch EC2 m3.xlarge instance (15 GB RAM, 4 cores and 2x40 SSD, renting
around \$0.12/hr), install stuff. Log out, log back in.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.docker.com/"&gt;Docker&lt;/a&gt; containers are lightweight, can grow
and shrink in ways VMs cannot. Access-level sandbox. Philosophy of
community-level and light-weight is appealing in the sense that it's
accessible.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.docker.com/"&gt;&lt;img alt="docker" src="https://monsterbashseq.files.wordpress.com/2015/11/docker.png?w=300"&gt;{.alignnone
.size-medium .wp-image-1461 width="300"
height="173"}&lt;/a&gt;&lt;br&gt;
Need host environment. Docker runs natively on linux os. We'll use AWS
to install Docker. Almost all workshops available through &lt;a href="http://dib-training.readthedocs.org/en/pub/"&gt;dib
lab&lt;/a&gt; are via AWS, minimizes
problems dealing with local hardware. Instructions
&lt;a href="http://angus.readthedocs.org/en/2015/amazon"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ubuntu 14.04 LTS, downstream of Debian, Long-term Support (LTS) for 5
years (until 2019). So, all materials here should be stable until then.&lt;/p&gt;
&lt;p&gt;Get it all working first by copy-pasting commands directly from
tutorial. (You'll learn less this passive way, but then make sure to go
back later and change things up to see what happens. This will increase
understanding.)&lt;/p&gt;
&lt;p&gt;Main idea is that you need to download and run Docker as root.
(Exceptionally bad idea to do, in general! We're assuming we can trust
Docker at this point, but usually we encourage to be more skeptical of
downloading things from websites and running as root.) Need root
privileges. (Some HPC systems will not grant users root privaleges.
Docker cannot be run in this case.) Nice thing about AWS is if you screw
something up, running as root, we're deleting the instance anyway. Get
docker running, prompt will change (this is bash prompt inside Docker
container, mostly isolated from host operating system):&lt;/p&gt;
&lt;p&gt;&lt;a href="https://monsterbashseq.files.wordpress.com/2015/11/rundocker.png"&gt;&lt;img alt="rundocker" src="https://monsterbashseq.files.wordpress.com/2015/11/rundocker.png?w=300"&gt;{.alignnone
.size-medium .wp-image-1462 width="300"
height="26"}&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Host accommodates many Docker containers, which each have their own file
systems. Uses host hardware. Dependent on the size of the machine. If
you have Mac/Windows configured with Linux VM, then the Docker will be
dependent on the hardware designated for the VM. &lt;a href="https://docs.docker.com/machine/"&gt;Docker
Machine&lt;/a&gt; allows a backend memory
allocation. Everything you did in the Docker, when you exit, Docker is
deleted. It's accessible again only if you know what your'e looking
for. New fresh Docker container starts each time. If you want to spin up
Docker containers all running web server, Docker is awesome for that.
For bioinformatics workflows, not main customer base for Docker, this is
not well worked out, much less supported with little infrastructure
existing. Titus' idea is to scale out, move computing to data rather
than move data to computing. With Docker containers, can spinning up
software processing &amp;gt;1 TB datasets (don't use shared file systems),
using many EBS volumes, many EC2 instances. You could feasibly install
and run individual software programs in separate Docker containers, e.g.
trimmomatic (java) and megahit (assembly) which might have
incompatibilities and periodic updates.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://monsterbashseq.files.wordpress.com/2015/11/docker1.png"&gt;&lt;img alt="docker" src="https://monsterbashseq.files.wordpress.com/2015/11/docker1.png?w=300"&gt;{.alignnone
.size-medium .wp-image-1463 width="300"
height="96"}&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;https://twitter.com/ctitusbrown/status/663791278560141312&lt;/p&gt;
&lt;p&gt;Get data and put on host, not on Docker (since you want to run the
Docker on the data. Bring the computing to the data, rather than the
other way around). Then, run the docker container, run the assembly
program command from within the container, exit. And the resulting data
from the assembly after it's finished are on the host!!!! SUPER COOL!!!!
:)&lt;/p&gt;
&lt;p&gt;&lt;a href="https://monsterbashseq.files.wordpress.com/2015/11/megahit_docker.png"&gt;&lt;img alt="megahit_docker" src="https://monsterbashseq.files.wordpress.com/2015/11/megahit_docker.png?w=300"&gt;{.alignnone
.size-medium .wp-image-1464 width="300"
height="247"}&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Actually, you can run this all piped into one command, without having to
run the docker command separately from the program command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;docker run -v /home/ubuntu/data:/mydata   
  -it megahit_ctr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;sh -c '/home/megahit/megahit --12 /mydata/&lt;em&gt;.pe.fq.gz
                         -r /mydata/&lt;/em&gt;.se.fq.gz
                         -o /mydata/ecoli -t 4'&lt;/p&gt;
&lt;p&gt;Or, you can write a bash shell script (see tutorial), then run the
script.&lt;/p&gt;
&lt;p&gt;Create Dockerfile, which can be version controlled. When encoding the
commands in a Dockerfile, each RUN command is a layer of the Dockerfile.
Try to include as many commands in one RUN command as possible, to
create less layers. None of this has to be repeated, once the Dockerfile
has been created and pushed to the &lt;a href="https://hub.docker.com/"&gt;Docker
hub&lt;/a&gt; (&lt;code&gt;docker login&lt;/code&gt;,
&lt;code&gt;docker build -t titus/megahit .&lt;/code&gt;, and &lt;code&gt;docker push titus/megahit)&lt;/code&gt;. All
you have to do is get the Dockerfile, install Dockerfile, know where
your data are, and run!!!&lt;/p&gt;
&lt;p&gt;Do challenge exercises:&lt;/p&gt;
&lt;p&gt;https://github.com/ngs-docs/2015-nov-docker/blob/master/challenge-exercises.rst&lt;/p&gt;</content></entry></feed>